const clientId=CLIENT_ID,clientSecret=CLIENT_SECRET,refreshToken=REFRESH_TOKEN;let accessToken="";async function refreshAccessToken(){let e={url:"https://accounts.spotify.com/api/token",headers:{Authorization:"Basic "+btoa(`${clientId}:${clientSecret}`),"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=refresh_token&refresh_token="+refreshToken};try{let t=await axios.post(e.url,e.data,{headers:e.headers});accessToken=t.data.access_token}catch(r){console.error("Error refreshing Access Token:",r)}}function updateTrack(){fetch("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:`Bearer ${accessToken}`}}).then(e=>{if(204===e.status)throw Error("No currently playing track");return e.json()}).then(e=>{let t=`${e.item.album.images[0].url}`;document.body.style.backgroundImage=`url(${t})`,document.querySelector("#track").innerHTML=`
        <img src="${e.item.album.images[0].url}" width="250">
        <h2>${e.item.name}</h2>
        <p>${e.item.artists[0].name}</p>
      `}).catch(e=>{"No currently playing track"!==e.message&&console.log(e),document.querySelector("#track").innerHTML="<p>Not listening to anything rn!</p>"})}setInterval(updateTrack,1e3),refreshAccessToken(),setInterval(refreshAccessToken,36e5);
